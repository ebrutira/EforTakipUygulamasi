<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Talep Takip Sistemi</title>
    <link rel="stylesheet" href="~/css/custom.css" />
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">📊 Talep Takip Sistemi</div>
            <div class="user-info">
                @{
                    var fullName = Context.Session.GetString("FullName") ?? "Kullanıcı";
                    var userRole = Context.Session.GetInt32("UserRole") ?? 3;
                    var roleText = userRole == 1 ? "Yönetici" : userRole == 2 ? "Geliştirici" : "Görüntüleyici";
                }
                Hoş geldin, @fullName (@roleText)
                <form method="post" action="/Auth/Logout" style="display:inline;">
                    <button type="submit" class="btn btn-secondary" style="margin-left: 1rem;">Çıkış</button>
                </form>
            </div>
        </div>
    </div>

    <main>
        <div class="container">
            <div class="tab-navigation">
                <a href="/Dashboard/Index" class="tab-button @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Dashboard" ? "active" : "")">
                    Dashboard
                </a>
                <a href="/Request/Index" class="tab-button @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Request" && ViewContext.RouteData.Values["Action"]?.ToString() == "Index" ? "active" : "")">
                    Talepler
                </a>
                <a href="/Report/Index" class="tab-button @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Report" ? "active" : "")">
                    Raporlar
                </a>
                @{
                    var currentUserRole = Context.Session.GetInt32("UserRole") ?? 3;
                }
                @if (currentUserRole == 1) // Admin
                {
                    <a href="/User/Index" class="tab-button @(ViewContext.RouteData.Values["Controller"]?.ToString() == "User" ? "active" : "")">
                        Kullanıcı Yönetimi
                    </a>
                }
            </div>
        </div>

        @if (TempData["ErrorMessage"] != null)
        {
            <div class="container">
                <div class="notification show" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
                    @TempData["ErrorMessage"]
                    <button class="close-btn" onclick="this.parentElement.remove()">&times;</button>
                </div>
            </div>
        }
        @RenderBody()
    </main>

    <!-- FOOTER - Container DIŞINDA -->
    <footer class="simple-footer">
        <div class="simple-footer-content">
            Copyright © Talep Takip Sistemi - 2025
        </div>
    </footer>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>